/**
 * v2.0 - Copyright 2015 Madden Media - All rights reserved.
 *
 * Advanced Google Analytics tracking script that tracks scroll distance and fires
 *	the specified distances as analytics events.
 *	
 * Requires Google Analytics or Tag Manager. This script will determine which 
 *	tracking object (GTM, Universal, Legacy, etc.) appears to be present and will 
 *	adjust tracking calls based on this.
 */
!function(){var e=!1;MMGAReadPercent=function(){this.DEBUG_MODE=!1,this.CALLBACK_DELAY=100,this.timer=0,this.readerLastPassed=0,this.isScrolling=!1,this.endContent=!1,this.didComplete=!1,this.readerLocations=[],this.startTime=(new Date).getTime(),this.totalTime=0,this.GA_TYPE=null;var t={readerTrackPercents:[1e-4,.25,.5,.75],fireReadCompleteEvent:!0,readingEventLabelPrefix:"Reading ",gtmEventName:"ScrollDistance",gtmDataLayerName:null,firePixelDistanceEvents:!1,logEventsToConsole:!1};arguments[0]&&"object"==typeof arguments[0]?this.settings=l(t,arguments[0]):this.settings=l(t,[]),e=!0,a()};var t=function(){if(void 0!==this.readerLocations){var e=window.scrollY||window.pageYOffset,t=window.innerHeight+e,a=document.documentElement.scrollHeight,o=new Date,r=Math.round((o.getTime()-this.startTime)/1e3);for(i=this.readerLastPassed;i<this.readerLocations.length;i++)if(t>=this.readerLocations[i]&&r>0){var l=n(this.settings.readerTrackPercents[i],!1);if(s(this.settings.readingEventLabelPrefix,l,location.pathname,r),this.settings.firePixelDistanceEvents){var c=n(this.readerLocations[i],!0);s(this.settings.readingEventLabelPrefix,c,location.pathname,r)}d(this.settings.readingEventLabelPrefix+this.readerLocations[i]+" /  "+l+" / "+r),this.readerLastPassed=i+1}if(this.settings.fireReadCompleteEvent&&t>=a&&!this.didComplete){o=new Date;o=new Date,r=Math.round((o.getTime()-this.startTime)/1e3),l=n(1,!1);if(s(this.settings.readingEventLabelPrefix,l,location.pathname,r),this.settings.firePixelDistanceEvents){c=n(a,!0);s(this.settings.readingEventLabelPrefix,c,location.pathname,r)}d(this.settings.readingEventLabelPrefix+l+" / "+r),this.didComplete=!0}}};function n(e,t){return t?this.settings.readingEventLabelPrefix+e+" pixels":e<.001?this.settings.readingEventLabelPrefix+"0%":this.settings.readingEventLabelPrefix+100*e+"%"}function s(e,t,i,n){if(!this.DEBUG_MODE){var s=function(){var e=null;null!=this.settings.gtmDataLayerName?e=this.settings.gtmDataLayerName:"undefined"!=typeof dataLayer&&"function"==typeof dataLayer.push&&(e=dataLayer);return e}();null==this.GA_TYPE&&(this.GA_TYPE=function(){var e=document.getElementsByTagName("script"),t="";for(var i in e)try{var n=e[i].getAttribute("src");n&&(-1!=n.indexOf("/gtm.js")?t="gtm":-1!=n.indexOf("/gtag")?t="gtag":-1!=n.indexOf("/analytics.js")?t="ga":-1!=n.indexOf("/ga.js")&&(t="gaq"))}catch(t){this.DEBUG_MODE&&(console.log(e[i]),console.log(t))}return t}()),"gtm"==this.GA_TYPE&&null!=s?(console.log("SOURCE: GTM"),s.push({event:this.settings.gtmEventName,eventCategory:e,eventAction:t,eventLabel:i,eventValue:n})):"gtag"==this.GA_TYPE?(console.log("SOURCE: GTAG"),gtag("event","mm_page_track",{event_category:e,event_action:t,event_label:i,event_value:n})):"ga"==this.GA_TYPE?(console.log("SOURCE: GA"),ga("send",{hitType:"event",eventCategory:e,eventAction:t,eventLabel:i,eventValue:n})):"gaq"==this.GA_TYPE&&(console.log("SOURCE: GAQ"),"undefined"!=typeof pageTracker?pageTracker._trackEvent(e,t,i,n):(_gaq.push(["_trackEvent",e,t,i,n]),_gaq.push(["pageTracker._trackEvent",e,t,i,n])))}}function a(){for(i=0;i<this.settings.readerTrackPercents.length;i++)this.readerLocations[i]=(e=this.settings.readerTrackPercents[i],void 0,t=document.documentElement.scrollHeight,Math.floor(t*e)),d("LOCATION: "+this.settings.readerTrackPercents[i]+" ("+this.readerLocations[i]+" / "+document.documentElement.scrollHeight+")");var e,t}function r(){this.timer&&clearTimeout(this.timer),this.timer=setTimeout(t,this.CALLBACK_DELAY)}function l(e,t){for(o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);return e}function d(e){this.settings.logEventsToConsole&&console.log(e)}!function(e){if(window.jQuery)jQuery(document).ready(function(){e()});else if("function"!=typeof window.onload)window.onload=e;else{var t=window.onload;window.onload=function(){t&&t(),e()}}}(function(){if(!e)MMGAReadPercent()}),window.addEventListener?window.addEventListener("resize",a):window.attachEvent("onresize",a),window.addEventListener?window.addEventListener("scroll",r):window.attachEvent("onscroll",r)}(),"undefined"==typeof console&&(console={},console.log=function(){});