!function(e,t){"function"==typeof define&&define.amd?define([],t(e)):"object"==typeof exports?module.exports=t(e):e.MMLazyLoad=t(e)}("undefined"!=typeof global?global:this.window||this.global,function(e){"use strict";var t=/bot|google|baidu|bing|msn|duckduckgo|teoma|slurp|yandex/i.test(navigator.userAgent),o=null,n=null,l=null,r=!1,a=!1,i=!1,d={},u=!!document.querySelector&&!!window.IntersectionObserver,s={},g=(window.innerHeight,{loadElements:null,root:null,rootMargin:"500px",threshold:0,debug:!1}),c=[];function b(e,t){var o=!1;(o=e.getAttribute("data-load-all")?e.getAttribute("data-load-all"):r?e.getAttribute("data-load-sm"):a?e.getAttribute("data-load-md"):e.getAttribute("data-load-lg"))?"img"==e.getAttribute("data-load-type")?(e.setAttribute("src",o),e.getAttribute("data-load-alt")&&e.setAttribute("alt",e.getAttribute("data-load-alt")),t&&console.log("LAZYLOAD img: "+o)):"class"!=e.getAttribute("data-load-type")||e.classList.contains(o)?"bg"==e.getAttribute("data-load-type")?(e.style.backgroundImage="url('"+o+"')",t&&console.log("LAZYLOAD bg: "+o)):"poster"==e.getAttribute("data-load-type")&&(e.setAttribute("poster",o),t&&console.log("LAZYLOAD poster: "+o)):(e.classList.add(o),t&&console.log("LAZYLOAD class: "+o)):t&&(console.log("LAZYLOAD not loading: no size found for this view"),console.log(e))}function m(){var e=window.getComputedStyle?getComputedStyle(o,null):o.currentStyle,t=window.getComputedStyle?getComputedStyle(n,null):n.currentStyle,d=window.getComputedStyle?getComputedStyle(l,null):l.currentStyle;r=!(!o||"none"==e.getPropertyValue("float")),a=!(!n||"none"==t.getPropertyValue("float")),i=!(!l||"none"==d.getPropertyValue("float")),s.debug&&(console.log("_isSmall: "+r),console.log("_isMedium: "+a),console.log("_isLarge: "+i))}function A(e){m(),Math.max(document.documentElement.clientHeight,window.innerHeight||0),window.pageYOffset}return d.init=function(e){if(!u)return void console.warn("LAZYLOAD: IntersectionObserver not supported!");for(var r in d.destroy(),s=e,g)void 0===s[r]&&(s[r]=g[r]);if(o=document.getElementById("isSmall"),n=document.getElementById("isMedium"),l=document.getElementById("isLarge"),m(),window.addEventListener("resize",A,!1),window.addEventListener("orientationchange",A,!1),null==s.loadElements)return void console.warn("LAZYLOAD: No elements provided - please do so during config with 'loadElements'. Exiting now.");if(!o||!n||!l)return void console.warn("LAZYLOAD: Missing one or more size testers. Exiting now.");for(var a=0;a<s.loadElements.length;a++)t||s.loadElements[a].getAttribute("data-load-onload")?b(s.loadElements[a],s.debug):c.push(s.loadElements[a]);const i=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&(b(e.target,s.debug),i.unobserve(e.target))})},{root:s.root,rootMargin:s.rootMargin,threshold:s.threshold});return c.forEach(e=>{e.getAttribute("data-load-manual")?s.debug&&(console.log("LAZYLOAD: Not observing manual element"),console.log(e)):i.observe(e)}),d},d.destroy=function(){s&&(s=null)},d.getDebugMode=function(){if(s)return s.debug},d.setDebugMode=function(e){s&&(s.debug=e)},d.manual=function(e){for(let t=0;t<c.length;t++)c[t].getAttribute("id")===e&&(b(c[t],s.debug),c.splice(t,1))},d});
