/**
 * v1.6 - Copyright 2016 Madden Media - All rights reserved.
 *
 * Global frameworks functions for all content.
 */
"undefined"!=typeof console&&console.log("%c NOTICE: madden-content-frameworks-v1.6.js is deprecated - please use the latest version.","background:orange; color:black");var _setChapterLinkCallback,_chapterSetCompleteCallback,_stickyTopBarProgressBarEl,_stickyTopBarHeight=0,_stickyTopBarOffset=0,_chapterTops=new Array,_onChapter=0,_stickyTopBarEl="#topBar",_mobileMenuEl="#mobileMenu",_socialMenuTriggerEl="#socialLinksTrigger",_topAndMobileMenuControl="#controlsTrigger",_chapterEl=".chapter",_chapterLinkEl=".chapterLink",_chapterElPrefix="#c",_multiSizeImageEl=".multiSize",_readMoreEl=void 0,_relatedLinkEl="#alsoLikeLinkWrap",DEFAULT_MOBILE_TEST_EL="#isMobile",DEFAULT_TABLET_TEST_EL="#isTablet",DEFAULT_PARALLAX_TEST_EL="#doParallax",IS_RESPONSIVE=document.addEventListener,_isMobile=!1,_isTablet=!1,_doParallax=!1;frameworksOnReady=function(e,t,r){initViewTypes(),initLayout(e,t,r)},frameworksOnScroll=function(){adjustScrollProgress()},frameworksOnTouchMove=function(){adjustScrollProgress()},frameworksOnResize=function(){initViewTypes(),adjustLayoutAfterResize()},initViewTypes=function(){_isMobile=0!=jQuery(DEFAULT_MOBILE_TEST_EL).length&&"none"!=jQuery(DEFAULT_MOBILE_TEST_EL).css("float"),_isTablet=0!=jQuery(DEFAULT_TABLET_TEST_EL).length&&"none"!=jQuery(DEFAULT_TABLET_TEST_EL).css("float"),_doParallax=0!=jQuery(DEFAULT_PARALLAX_TEST_EL).length&&"none"!=jQuery(DEFAULT_PARALLAX_TEST_EL).css("float")},initLayout=function(e,t,r){if(void 0!=e&&(_setChapterLinkCallback=e.setChapterLinkCallback||_setChapterLinkCallback,_chapterSetCompleteCallback=e.chapterSetCompleteCallback||_chapterSetCompleteCallback),void 0!=t&&(_stickyTopBarEl=t.topBar||_stickyTopBarEl,_mobileMenuEl=t.mobileMenuEl||_mobileMenuEl,_socialMenuTriggerEl=t.socialMenuTriggerEl||_socialMenuTriggerEl,_topAndMobileMenuControl=t.topAndMobileMenuControl||_topAndMobileMenuControl,_chapterEl=t.chapterEl||_chapterEl,_chapterLinkEl=t.chapterLinkEl||_chapterLinkEl,_chapterElPrefix=t.chapterElPrefix||_chapterElPrefix,_multiSizeImageEl=t.multiSizeImageEl||_multiSizeImageEl,_readMoreEl=t.readMoreEl||_readMoreEl,_relatedLinkEl=t.relatedLinkEl||_relatedLinkEl),jQuery(_mobileMenuEl).length){var a=jQuery(_mobileMenuEl),o=a.data("chapters"),i=a.data("top-link"),n=a.data("close-trigger");try{jQuery(n).click(function(){toggleMobileMenu(_mobileMenuEl,_topAndMobileMenuControl)}),jQuery(i).click(function(){toTop(),toggleMobileMenu(_mobileMenuEl,_topAndMobileMenuControl)}),jQuery(o).children("div").each(function(e){jQuery(this).click(function(){toggleMobileMenu(_mobileMenuEl,_topAndMobileMenuControl);var t=jQuery(this).data("chapter");void 0===t?goToChapter(e+1):goToChapter(parseInt(t))})})}catch(e){console.log(e)}}if(jQuery(_socialMenuTriggerEl).length){var l=jQuery(_socialMenuTriggerEl),s=l.data("social-links"),c=l.data("social-links-class-off"),u=l.data("social-links-class-on"),p=l.data("trigger-class-off"),h=l.data("trigger-class-on");try{var d=jQuery(s);getIsDesktop()?d.on("mouseenter",function(e){l.attr("class",h)}).on("mouseleave",function(e){l.attr("class",p)}):jQuery(document).on("touchstart",s,function(e){d.attr("class",u),l.attr("class",h)}).on("touchend",function(){d.attr("class",c),l.attr("class",p)}).on("touchcancel",function(){d.attr("class",c),l.attr("class",p)})}catch(e){console.log(e)}}jQuery(".socialShare").each(function(){var e=jQuery(this).attr("class"),t="#",r=!1;if(-1!=e.indexOf("pinterest")){var a=jQuery(this).data("ogimage");t=buildSocialShareLink("PINTEREST",a)}else-1!=e.indexOf("twitter")?t=buildSocialShareLink("TWITTER",null):-1!=e.indexOf("facebook")&&(r=!0,t=buildSocialShareLink("FACEBOOK",null));null==t?jQuery(this).attr("href","javascript:alert('Sharing this site is not currently available.')"):r?(jQuery(this).attr("href","#"),jQuery(this).attr("onclick",t)):jQuery(this).attr("href",t)}),jQuery(_stickyTopBarEl).length&&(_stickyTopBarHeight=jQuery(_stickyTopBarEl).height(),void 0!=jQuery(_stickyTopBarEl).data("offset-el")&&0!=jQuery(jQuery(_stickyTopBarEl).data("offset-el")).length&&(_stickyTopBarOffset=jQuery(jQuery(_stickyTopBarEl).data("offset-el")).offset().top),void 0!=jQuery(_stickyTopBarEl).data("progress-bar-el")&&0!=jQuery(jQuery(_stickyTopBarEl).data("progress-bar-el")).length&&(_stickyTopBarProgressBarEl=jQuery(_stickyTopBarEl).data("progress-bar-el"))),void 0!=_readMoreEl&&(jQuery.isArray(_readMoreEl)||(_readMoreEl=[_readMoreEl]),jQuery.each(_readMoreEl,function(e,t){jQuery(t).click(function(){var e=0;void 0!=jQuery(t).data("offset-el")&&0!=jQuery(jQuery(t).data("offset-el")).length&&(e=jQuery(jQuery(t).data("offset-el")).offset().top),jQuery("html, body").animate({scrollTop:e-_stickyTopBarHeight},300)})})),adjustMultiSizedImages(),r&&initChapterTops(!0),jQuery(_chapterLinkEl).click(function(){var e=jQuery(this).data("chapter");if(void 0!==e)goToChapter(parseInt(e));else{jQuery(this.hash);goToChapter(this.hash.substr(1))}return!1})},initChapterTops=function(e){var t=new Array;jQuery(_chapterEl).each(function(e){t[e]=Math.floor(jQuery(this).offset().top-_stickyTopBarHeight)}),_chapterTops=t,e&&adjustScrollProgress()},buildSocialShareLink=function(e,t){var r,a="",o="",i=encodeURIComponent(document.title),n=encodeURIComponent(t);if("file:"==location.protocol){var l=jQuery("body").data("online-url"),s=jQuery("link[rel='canonical']").href;if(void 0!==l?o=l:void 0!==s&&(o=s),""==o)return null}else""==o&&(o=[location.protocol,"//",location.host,location.pathname].join(""));switch(r=encodeURIComponent(o),e){case"FACEBOOK":a="window.open('https://www.facebook.com/sharer/sharer.php?u="+r+"','facebook-share-dialog', 'width=626,height=436'); return false;";break;case"PINTEREST":a="https://www.pinterest.com/pin/create/button/?url="+r+"&media="+n+"&description="+i;break;case"TWITTER":a="https://twitter.com/intent/tweet?text="+i+"%3A%20"+r+"&amp;source=webclient"}return a},buildRelatedLinks=function(e){for(var t=jQuery(_relatedLinkEl),r=0;r<e.length;r++){var a=r+1,o="<div class='linkWrapper'><a href='"+e[r].link+"' target='_blank'><div class='rLink rLink"+a+"'><div id='linkWrapper"+a+"' class='linkTitleWrapper'><div class='linkTitle'>"+e[r].title+"</div></div></div></a></div>";t.append(o)}},unFixBGImagesForIPads=function(e){e=void 0===e?".chapterImage":e,getDoParallax()&&getIsIPad()&&$(e).css("background-attachment","scroll")},getCurrentChapter=function(){return _onChapter},getVisibleViewport=function(e){return e?window.innerHeight-_stickyTopBarHeight+"px":parseInt(window.innerHeight-_stickyTopBarHeight)},getViewportOffset=function(e,t){return t?jQuery(e).offset().top-jQuery(window).scrollTop()-_stickyTopBarHeight+"px":parseInt(jQuery(e).offset().top-jQuery(window).scrollTop()-_stickyTopBarHeight)},getItemInViewport=function(e){var t=jQuery(e).offset().top;return!(t+jQuery(e).outerHeight()<=jQuery(window).scrollTop()||t>=jQuery(window).scrollTop()+jQuery(window).height())},getItemInViewportCenter=function(e,t){var r=jQuery(e).offset().top,a=jQuery(window).height()/2;return t=t||0,!(r>=jQuery(window).scrollTop()+a+t||r<=jQuery(window).scrollTop()+a-t)},getStickyTopBarHeight=function(){return _stickyTopBarHeight},getIsMobile=function(){return _isMobile},getIsTablet=function(){return _isTablet},getDoParallax=function(){return _doParallax},getIsDesktop=function(){return!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},getIsIPad=function(){return navigator.userAgent.match(/iPad;.*CPU.*OS/i)},getIsNewerIPad=function(){return!!getIsIPad()&&1!=window.devicePixelRatio},getIsNewerIpad=function(){return getIsNewerIPad()},getIsResponsive=function(){return IS_RESPONSIVE},adjustLayoutAfterResize=function(){initChapterTops(!0),adjustMultiSizedImages()},adjustChapterLinksArtHeight=function(e,t){jQuery(e).css("height",jQuery(t).outerHeight())},adjustSizeToParentAndViewport=function(e,t){jQuery(e).css("height",getVisibleViewport(!0)),jQuery(e).css("width",jQuery(t).width())},adjustSizeHeightToParent=function(e,t){var r=jQuery(t).height();jQuery(e).css("height",r+"px")},equalizeElementHeightsToTallest=function(e){for(var t=0,r=0;r<e.length;r++){var a=jQuery(e[r]).height();null!=a&&(t=a>t?a:t)}for(r=0;r<e.length;r++)jQuery(e[r]).css("height",t+"px")},adjustScrollProgress=function(){if(0!=jQuery(_stickyTopBarProgressBarEl).length){var e,t=-1,r=jQuery(document).height()-jQuery("body").height()-_stickyTopBarOffset;e=Math.round((jQuery(document).scrollTop()-_stickyTopBarOffset)/r*100),jQuery(_stickyTopBarProgressBarEl).css("width",e+"%");for(var a=_chapterTops.length-1;a>=0;a--)if(jQuery(document).scrollTop()>=_chapterTops[a]){t=a+1;break}return-1!=t&&adjustChapterLinks(t),t}},adjustChapterLinks=function(e){jQuery(_chapterLinkEl).each(function(){jQuery(this).attr("href")!="#"+e?"function"==typeof _setChapterLinkCallback&&_setChapterLinkCallback(this,!1):("function"==typeof _setChapterLinkCallback&&_setChapterLinkCallback(this,!0),_onChapter=e)})},adjustMultiSizedImages=function(){var e=jQuery(_multiSizeImageEl);e.length&&e.each(function(){getIsResponsive()||void 0==jQuery(this).data("src-legacy")?getIsMobile()&&void 0!=jQuery(this).data("src-small")?jQuery(this).attr("src",jQuery(this).data("src-small")):getIsTablet()&&void 0!=jQuery(this).data("src-medium")?jQuery(this).attr("src",jQuery(this).data("src-medium")):void 0!=jQuery(this).data("src")&&jQuery(this).attr("src",jQuery(this).data("src")):jQuery(this).attr("src",jQuery(this).data("src-legacy"))})},toTop=function(){jQuery("html, body").animate({scrollTop:0},600)},runTopMenuControl=function(){getIsMobile()?toggleMobileMenu(_mobileMenuEl,_topAndMobileMenuControl):toTop()},toggleMobileMenu=function(e,t){getIsMobile()&&(jQuery(e).toggle("fast"),jQuery(t).toggle("fast"))},goToChapter=function(e){var t=jQuery(_chapterElPrefix+e).offset().top-_stickyTopBarHeight+1,r=_onChapter>e?_onChapter-e:e-_onChapter,a=Math.floor(1e3/(_chapterTops.length-(_chapterTops.length-r)));jQuery("html, body").animate({scrollTop:t},a,function(){adjustChapterLinks(e),"function"==typeof _chapterSetCompleteCallback&&_chapterSetCompleteCallback(e)}),_onChapter=e},animateOverflowContent=function(e,t,r,a,o){if(o==_onChapter){var i=jQuery(e).css("background-position").split(" "),n=isNaN(t)?t:t+parseInt(i[0])+"px",l=isNaN(r)?r:r+parseInt(i[1])+"px";jQuery(e).css({"background-position":n+" "+l})}window.setTimeout(function(){animateOverflowContent(e,t,r,a,o)},a)},cycleImages=function(e,t){var r=jQuery(e+" .active"),a=r.next().length>0?r.next():jQuery(e+" img:first");a.css("z-index",2),r.fadeOut(t,function(){r.css("z-index",1).show().removeClass("active"),a.css("z-index",3).addClass("active")})};
